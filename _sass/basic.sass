body
  background: $light
  color: $dark
  font-family: $font-family
  font-weight: $font-weight
  font-size: $font-size
  line-height: $line-height
  margin: 0
  min-height: 100vh
  -webkit-text-size-adjust: 100%
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale

@media (prefers-color-scheme: dark)
  body
    background: $light
    color: $dark

h1, h2, h3, h4, h5, h6
  font-weight: $heading-weight

h2
  margin-bottom: 0em

h3
  margin-bottom: 0.4em

h4
  margin-bottom: 0.4em

b, strong, th
  font-weight: $font-weight + 200
  color: $text-dark !important

p
  text-align: justify

a
  color: $link-color
  text-decoration: inherit

u.wavy-underline
  text-decoration: $featured-color wavy underline
  -webkit-text-decoration: wavy underline $featured-color
  -webkit-text-decoration-thickness: 5px

u.wip-underline
  text-decoration: underline $inprogress-color
  -webkit-text-decoration: underline $inprogress-color
  -webkit-text-decoration-thickness: 2.5px
  text-decoration-thickness: 2.5px

header a, footer a, aside a
  color: inherit

header time
  color: reduce(100)

hr
  border: 1px solid reduce(30)
  margin: 2em 0

article:not(:last-of-type)
  border-bottom: 1px solid reduce(14)

blockquote
  background: reduce(6)
  border-left: 3px solid reduce(90)
  padding: 1px 3em
  opacity: 1.0
  background-color: #ffffff

blockquote, figure
  margin: 1em 0

ul.section-nav
  // list-style: none
  padding-left: 2em
  margin-top: -1.2em
  color: gray
  link-color: gray
  font-size: calc(0.6rem + 0.2vw)

canvas
  width: 100%
  height: 100%
  padding-top: 2em
  padding-bottom: 2em

img
  margin: .5em 0

ul
  padding-left: 1.5em
  text-align: justify

ol
  padding-left: 1.2em
  text-align: justify

li
  margin: .25em 0

li.decimal
  list-style-type: decimal

img
  border-radius: 2px
  max-width: 100%
  height: auto
  display: block
  margin-left: auto
  margin-right: auto

table
  max-width: 100%
  overflow-y: scroll
  border-spacing: 1px
  border-radius: 2px
  box-shadow: 0 0 0 1px reduce(12) inset

th, td
  padding: .5em 1em
  box-shadow: 0 0 0 1px reduce(12)

tr:hover, tr:nth-child(odd) td
  background: reduce(4)

pre
  background: #f6f6f6
  border-radius: 2px
  font-size: .8em
  margin: 1.5em 0
  padding-top: 0em
  padding-bottom: 1.4em
  overflow-x: auto

\:not(pre) > code
  font-size: .83em
  background: reduce(15)
  opacity: .7
  border-radius: 2px
  margin: 0 .1em
  padding: .2em .4em

.title-main 
  background: $featured-color
  color: #ffffff
  padding-left: 0.5em
  padding-right: 0.5em
  padding-bottom: 0.2em
  padding-top: 0.2em
  font-size: calc(0.9rem + 0.2vw)
  
figcaption
  text-align: center
  margin-top: 1em
  color: gray
  font-size: calc(0.6rem + 0.2vw)

div.article
  text-align: justify

.mjx-chtml
  font-size: 100% !important 

.mjx-sup 
  font-size: 100% !important

.mjx-sub 
  font-size: 90% !important

.mjx-char 
  font-size: 90% !important
  
.MJXc-display
  font-size: 100% !important
  
.MathJax_SVG
  font-size: 100% !important

.MathJax_SVG_Display
  font-size: 100% !important

.where-list
  margin-left: 1em

.youtube-container 
    position: relative
    padding-bottom: 56.25%
    height: 0
    overflow: hidden
    max-width: 100%

.youtube-container iframe, 
.youtube-container object, 
.youtube-container embed 
    position: absolute
    top: 0
    left: 0
    width: 100%
    height: 100%

  
.chat-message 
  display: flex
  flex-direction: column
  margin-bottom: 10px

.chat-message .message-content 
  padding: 10px 15px
  border-radius: 20px
  line-height: 1.5

.chat-message.user 
  align-items: flex-end

.chat-message.user .message-content 
  background-color: #f7f7f8
  color: #343541
  margin-left: auto
  margin-right: 1em
  max-width: 70%
  text-align: right
  padding-top: 0
  padding-bottom: 0

.chat-message.assistant .message-content 
  background-color: #ffffff
  color: #343541

.message-content table
  width: 100%

hr 
  border: 0
  height: 1px
  background-color: #e5e5e6
  margin: 20px 0
  margin-top: 2em
  margin-bottom: 2em

.message-content h3 
  margin-top: 20px
  margin-bottom: 10px
  font-size: 1.1em
  color: #343541

.message-content a 
  color: #4b83ec
  text-decoration: none

.message-content ul 
  padding-left: 20px
  margin: 10px 0

.message-content li 
  margin-bottom: 5px

.message-content pre 
  background-color: #f7f7f8
  padding: 10px
  border-radius: 5px
  overflow-x: auto
  margin: 10px 0

.message-content code 
  background-color: #f7f7f8
  padding: 2px 4px
  border-radius: 3px
  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace

.message-content strong 
  font-weight: 600

.latex-container
  overflow: auto

// --- Global styles (moved from default.html inline <style>) ---

html
  overflow: scroll
  overflow-x: hidden
  scroll-behavior: smooth
  &::-webkit-scrollbar
    width: 0
    background: transparent

a:hover
  opacity: 0.5
  transition: opacity 0.5s ease

// --- Shared list component classes (from note.html/testbed.html inline <style>) ---

.use-bottom-line
  border-bottom: 1px dotted rgba(128, 128, 128, 0.14)

.use-bottom-line--padded
  border-bottom: 1px dotted rgba(128, 128, 128, 0.14)
  padding-bottom: 2em

.clickable
  cursor: pointer
  &:hover
    opacity: 0.5
    transition: opacity 0.5s ease

.use-gray
  color: gray

.emoji-image
  width: 1.25em
  height: 1.25em
  margin-left: 0.3em
  margin-right: 0.5em

.post-row
  display: flex
  flex-direction: row
  align-items: center
  justify-content: space-between

.title-wrapper
  flex: 1 1 auto
  display: flex
  align-items: center
  margin-right: 1em
  overflow: hidden

.post-title
  margin: 0
  color: $text-dark
  white-space: nowrap

.title-scroll
  display: block
  width: 100%
  overflow-x: auto
  overflow-y: hidden
  white-space: nowrap
  -ms-overflow-style: none
  scrollbar-width: none
  &::-webkit-scrollbar
    height: 0px
  &::-webkit-scrollbar-track,
  &::-webkit-scrollbar-thumb
    background: transparent

.list-summary
  margin-top: -1.5em
  color: gray
  float: left

.list-filter-button
  margin-top: -1.5em
  float: right
  font-size: smaller

.list-spacer
  margin-top: -1em

// --- Note-specific classes ---

.note-post-item
  margin-top: -0.1em

.note-emoji-column
  flex: 0 0 auto
  display: flex
  align-items: center
  padding-right: 0.2em
  margin-left: -0.4em

.note-date-column
  flex: 0 0 auto
  display: flex
  align-items: center
  margin-left: 0.5em

.note-date-time
  font-size: smaller
  margin-top: 0.5em
  margin-bottom: 0.5em

// --- Testbed-specific classes ---

.testbed-post-item
  margin-top: -0.2em

.testbed-date
  margin-top: -0.5em
  margin-bottom: 0.5em

.testbed-excerpt-wrapper
  display: flex
  font-size: calc(0.45rem + 0.2vw)
  text-align: justify

.testbed-excerpt-text
  margin-bottom: -0.4em

.testbed-thumbnail
  margin-left: 7em
  margin-top: 1.2em
  display: block
  width: 25%
  object-fit: cover

.testbed-hashtag
  margin-top: 3em
  margin-bottom: 0.5em
  font-size: calc(0.35rem + 0.2vw)
  text-align: right
  color: gray

// --- Embed classes ---

.notebook-container
  width: 100%
  overflow-y: hidden

.notebook-iframe
  width: 100%
  height: 100%
  border: none

// --- Meta/config classes ---

.meta-link
  color: $link-color

.site-description
  color: #9c9c9c
  font-weight: 200
  font-size: smaller